This is a piece of Rack middleware that converts requests with the
special X-Raw-Upload header into the format that would have been
produced by Rack if the request had been a normal multipart form data
request like that generated by an HTML form with a file upload field.

This is useful because raw uploads are the most convenient when
posting using XMLHttpRequest, but multipart form requests are most
convenient when using, e.g., Rails with Paperclip.

Basically, your request should look like this:

  | POST /article/123/comments HTTP/1.1
  | X-Raw-Upload: true
  | X-Raw-Upload-Field-Name: comment[attachment]
  | X-Raw-Upload-File-Name: Example.txt
  | X-Raw-Upload-Other-Params-JSON: { "comment": { "title": "Example" } }
  | Content-Type: text/plain
  | Content-Length: 42
  | 
  | This would be the contents of Example.txt.

When using Rails, this middleware has to be inserted rather early in
the stack (because otherwise Rails will choke on raw uploads):

  Acme::Application.config.middleware.
    insert_before ActionDispatch::Static, RackRawUpload
